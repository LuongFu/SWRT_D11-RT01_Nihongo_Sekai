@{
    Layout = "_Layout";
    ViewData["Title"] = "Trung Tâm Trợ Giúp";
}

@section Head {
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trung Tâm Trợ Giúp</title>
    <meta name="description"
          content="Tìm kiếm trợ giúp cho hành trình học tiếng Nhật của bạn. Tìm câu trả lời cho các câu hỏi thường gặp, hướng dẫn và tài nguyên hỗ trợ." />
}

@section Styles {
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet" />

    <!-- CSS trang cụ thể -->
    <link rel="stylesheet" href="~/css/help.css" />
    <link rel="stylesheet" href="~/css/styles.css" />
    <link rel="stylesheet" href="~/css/footer.css" />
}

<!-- Nội dung chính -->
<main>
    <!-- BEGIN: Development Banner -->
    <section class="dev-banner d-flex align-items-center">
        <div class="container d-flex align-items-center">
            <img src="https://img.icons8.com/ios-filled/80/000000/robot.png"
                 alt="Robot đang xây dựng"
                 class="me-3 dev-banner-icon" />
            <div>
                <h4 class="dev-banner-title mb-1">🔧 Tính năng đang phát triển</h4>
                <p class="dev-banner-text mb-0">
                    Trang này hiện vẫn đang trong giai đoạn phát triển và nội dung chỉ mang tính <em>placeholder</em>.
                    Cảm ơn bạn đã kiên nhẫn, chúng tôi sẽ cập nhật sớm!
                </p>
            </div>
        </div>
    </section>
    <!-- Tiêu đề trang -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title">Trung Tâm Trợ Giúp</h1>
            <p class="page-subtitle">
                Tìm câu trả lời cho các câu hỏi thường gặp và nhận hỗ trợ cho hành trình học tiếng Nhật của bạn
            </p>
        </div>
    </section>

    <!-- Phần tìm kiếm -->
    <section class="help-search-section">
        <div class="container">
            <div class="search-box">
                <svg class="search-icon"
                     viewBox="0 0 24 24"
                     fill="none"
                     stroke="currentColor"
                     stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.35-4.35" />
                </svg>
                <input type="text"
                       id="helpSearch"
                       placeholder="Tìm kiếm bài viết trợ giúp..."
                       class="search-input" />
            </div>
        </div>
    </section>

    <!-- Danh mục FAQ -->
    <section class="faq-categories-section">
        <div class="container">
            <h2 class="section-title">Chủ Đề Phổ Biến</h2>
            <div class="categories-grid">
                <div class="category-card" data-category="getting-started">
                    <div class="category-icon">
                        <svg viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z" />
                            <path d="M2 17l10 5 10-5" />
                            <path d="M2 12l10 5 10-5" />
                        </svg>
                    </div>
                    <h3 class="category-title">Bắt Đầu</h3>
                    <p class="category-description">
                        Học cách tạo tài khoản, chọn khóa học và bắt đầu hành trình học tiếng Nhật.
                    </p>
                    <span class="category-count">12 bài viết</span>
                </div>

                <div class="category-card" data-category="courses">
                    <div class="category-icon">
                        <svg viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
                        </svg>
                    </div>
                    <h3 class="category-title">Khóa Học & Học Tập</h3>
                    <p class="category-description">
                        Tất cả về khóa học, theo dõi tiến độ, chứng chỉ và tài liệu học tập.
                    </p>
                    <span class="category-count">18 bài viết</span>
                </div>

                <div class="category-card" data-category="classrooms">
                    <div class="category-icon">
                        <svg viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                            <circle cx="9" cy="7" r="4" />
                            <path d="m22 21-3-3" />
                        </svg>
                    </div>
                    <h3 class="category-title">Lớp Học Trực Tiếp</h3>
                    <p class="category-description">
                        Tham gia các buổi học trực tiếp, tương tác với giáo viên và luyện tập cùng bạn học khác theo thời gian thực.
                    </p>
                    <span class="category-count">8 bài viết</span>
                </div>

                <div class="category-card" data-category="technical">
                    <div class="category-icon">
                        <svg viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                        </svg>
                    </div>
                    <h3 class="category-title">Hỗ Trợ Kỹ Thuật</h3>
                    <p class="category-description">
                        Khắc phục sự cố kỹ thuật, yêu cầu trình duyệt và vấn đề tài khoản.
                    </p>
                    <span class="category-count">15 bài viết</span>
                </div>

                <div class="category-card" data-category="billing">
                    <div class="category-icon">
                        <svg viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                            <line x1="1" y1="10" x2="23" y2="10" />
                        </svg>
                    </div>
                    <h3 class="category-title">Thanh Toán & Hóa Đơn</h3>
                    <p class="category-description">
                        Quản lý đăng ký, phương thức thanh toán, hoàn tiền và thông tin hóa đơn.
                    </p>
                    <span class="category-count">10 bài viết</span>
                </div>

                <div class="category-card" data-category="account">
                    <div class="category-icon">
                        <svg viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                            <circle cx="12" cy="7" r="4" />
                        </svg>
                    </div>
                    <h3 class="category-title">Cài Đặt Tài Khoản</h3>
                    <p class="category-description">
                        Cập nhật hồ sơ, đổi mật khẩu, cài đặt quyền riêng tư và tùy chọn tài khoản.
                    </p>
                    <span class="category-count">7 bài viết</span>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Phổ Biến -->
    <section class="popular-faqs-section">
        <div class="container">
            <h2 class="section-title">Câu Hỏi Thường Gặp</h2>
            <div class="faq-accordion" id="faqAccordion">
                <!-- Các mục FAQ sẽ được tải động -->
            </div>
        </div>
    </section>

    <!-- Liên hệ hỗ trợ -->
    <section class="contact-support-section">
        <div class="container">
            <div class="support-card">
                <div class="support-content">
                    <h2 class="support-title">Vẫn cần trợ giúp?</h2>
                    <p class="support-description">
                        Không tìm thấy câu trả lời bạn cần? Đội ngũ hỗ trợ của chúng tôi luôn sẵn sàng giúp bạn với bất kỳ câu hỏi nào về hành trình học tiếng Nhật.
                    </p>
                    <div class="support-actions">
                        <!-- Dùng Tag‑Helper để chuyển hướng đến /SidePages/Contact -->
                        <a asp-controller="SidePages"
                           asp-action="Contact"
                           class="btn btn-primary">
                            Liên hệ hỗ trợ
                        </a>

                        <!-- vẫn giữ mailto nếu bạn muốn -->
                        <a href="mailto:support@nihongosekai.com"
                           class="btn btn-outline">
                            Gửi Email
                        </a>
                    </div>

                </div>
                <div class="support-image">
                    <svg viewBox="0 0 24 24"
                         fill="none"
                         stroke="currentColor"
                         stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                    </svg>
                </div>
            </div>
        </div>
    </section>
</main>

@section Scripts {
    <script src="~/js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
          initializeContactForm();
        });

        function initializeContactForm() {
          const form = document.getElementById("contactForm");
          form.addEventListener("submit", async (e) => {
            e.preventDefault();
            await handleContactFormSubmission(form);
          });
          form.querySelectorAll("input, textarea, select")
              .forEach(i => i.addEventListener("blur", () => validateInput(i)));
        }

        async function handleContactFormSubmission(form) {
          try {
            showLoading();
            // mô phỏng gọi API
            await new Promise(r => setTimeout(r, 1500));
            window.NihongoSekai.showToast("Gửi tin nhắn thành công! Chúng tôi sẽ phản hồi trong vòng 24 giờ.", "success");
            form.reset();
          } catch {
            window.NihongoSekai.showToast("Gửi tin nhắn thất bại. Vui lòng thử lại.", "error");
          } finally {
            hideLoading();
          }
        }

        function openLiveChat() {
          window.NihongoSekai.showToast("Tính năng chat trực tiếp sắp ra mắt! Vui lòng sử dụng email hoặc điện thoại trước nhé.", "info");
        }

        function showOfficeLocations() {
          document.getElementById("officeLocations").scrollIntoView({ behavior: "smooth" });
        }
    </script>
}
