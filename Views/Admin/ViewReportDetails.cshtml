@using JapaneseLearningPlatform.Data.Enums
@using JapaneseLearningPlatform.Models
@model Report

@{
    ViewData["Title"] = $"Chi tiết Báo cáo #{Model.Id}";
}

<h2>@ViewData["Title"]</h2>

<dl class="row">
    <dt class="col-sm-2">Họ tên</dt>
    <dd class="col-sm-10">@Model.FullName</dd>

    <dt class="col-sm-2">Email</dt>
    <dd class="col-sm-10">@Model.Email</dd>

    <dt class="col-sm-2">Vai trò</dt>
    <dd class="col-sm-10">@Model.Role</dd>

    <dt class="col-sm-2">Chủ đề</dt>
    <dd class="col-sm-10">
        @(
                Model.Subject == ReportSubject.Technical ? "Hỗ Trợ Kỹ Thuật" :
                Model.Subject == ReportSubject.Billing ? "Thanh Toán & Hóa Đơn" :
                Model.Subject == ReportSubject.Courses ? "Câu Hỏi Về Khóa Học" :
                Model.Subject == ReportSubject.Partnerships ? "Đối Tác Doanh Nghiệp" :
                Model.Subject == ReportSubject.Feedback ? "Phản Hồi & Góp Ý" :
                "Khác"
                )
    </dd>

    @if (!string.IsNullOrEmpty(Model.OrderNumber))
    {
        <dt class="col-sm-2">Mã đơn hàng</dt>
        <dd class="col-sm-10">@Model.OrderNumber</dd>
    }

    <dt class="col-sm-2">Nội dung</dt>
    <dd class="col-sm-10">@Model.Message</dd>

    <dt class="col-sm-2">Gửi lúc</dt>
    <dd class="col-sm-10">@Model.SubmittedAt.ToLocalTime():G</dd>

    <dt class="col-sm-2">Trạng thái</dt>
    <dd class="col-sm-10">
        @(
                Model.IsResolved ? "Đã giải quyết" : "Chưa giải quyết"
                )
    </dd>
</dl>

<div class="mt-3">
    <a asp-action="AdminIndex" class="btn btn-secondary">Quay về danh sách</a>

    @if (!Model.IsResolved)
    {
        <form asp-action="Resolve"
              method="post"
              class="d-inline">
            <input type="hidden"
                   name="id"
                   value="@Model.Id" />
            <button class="btn btn-success">
                Đánh dấu hoàn thành
            </button>
        </form>
    }
</div>
